<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!--设置流式布局-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0"/>
    <title>洪静萍-京东</title>
    <link rel="stylesheet" href="css/base.css"/>
    <link rel="stylesheet" href="css/index.css"/>
</head>
<body>
<!--整体布局-->
<div class="jd_layout">
    <!--头部-->
    <header class="jd_header">
        <div class="jd_header_box">
            <!--图标logo-->
            <a class="icon_logo" href="#"></a>
            <!--搜索框search,固定的结构,在移动端可以调用enter键，改成搜索按钮-->
            <form action="#">
                <span class="icon_search"></span>
                <input type="search" placeholder="搜索"/>
            </form>
            <!--登录login-->
            <a class="login" href="#">登录</a>
        </div>
    </header>
    <!--轮播图banner-->
    <div class="jd_banner ">
        <ul class="clearfix">
            <li><a href="#"><img src="images/l8.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l1.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l2.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l3.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l4.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l5.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l6.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l7.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l8.jpg" alt=""/></a></li>
            <li><a href="#"><img src="images/l1.jpg" alt=""/></a></li>
        </ul>
        <ul >
            <li class="now"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <!--nav-->
    <nav class="jd_nav">
        <ul class="clearfix">
            <li>
                <a href="#">
                    <img src="images/nav0.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav1.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav2.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav3.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav4.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav5.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav6.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="images/nav7.png" alt=""/>
                    <p>京东超市</p>
                </a>
            </li>
        </ul>
    </nav>
    <!--商品-->
    <main class="jd_product">
        <section class="jd_product_item secKill_box">
            <!--头部-->
            <div class="jd_product_tit noborder clearfix">
                <div class="f_left clearfix">
                    <span class="sk_name">掌上秒杀</span>
                    <div class="sk_time">
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                    </div>
                </div>
                <div class="f_right m_r10">
                    <a href="#">更多></a>
                </div>
            </div>
            <!--详情-->
            <div class="product_con">
                <ul class="sk_product clearfix">
                    <li>
                        <a href="#">
                            <img src="images/detail01.jpg" alt=""/>
                            <p class="now_price">￥10.00</p>
                            <p class="old_price">1000</p>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="images/detail02.jpg" alt=""/>
                            <p class="now_price">￥10.00</p>
                            <p class="old_price">1000</p>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <img src="images/detail01.jpg" alt=""/>
                            <p class="now_price">￥10.00</p>
                            <p class="old_price">1000</p>
                        </a>
                    </li>
                </ul>
            </div>

        </section>
        <section class="jd_product_item" >
            <!--头部-->
            <div class="jd_product_tit">
                <h3>京东超市</h3>
            </div>
            <!--详情-->
            <div class="product_con clearfix">
                <a class="w_50 f_left b_right" href="#"><img src="images/cp1.jpg" alt=""/></a>
                <a class="w_50 f_right b_bottom" href="#"><img src="images/cp2.jpg" alt=""/></a>
                <a class="w_50 f_right" href="#"><img src="images/cp3.jpg" alt=""/></a>
            </div>
        </section >
        <section class="jd_product_item" >
            <!--头部-->
            <div class="jd_product_tit">
                <h3>京东超市</h3>
            </div>
            <!--详情-->
            <!--详情-->
            <div class="product_con clearfix">
                <a class="w_50 f_right b_right " href="#"><img src="images/cp4.jpg" alt=""/></a>
                <a class="w_50 f_left b_bottom" href="#"><img src="images/cp5.jpg" alt=""/></a>
                <a class="w_50 f_left" href="#"><img src="images/cp6.jpg" alt=""/></a>
            </div>
        </section>
        <section class="jd_product_item" >
            <!--头部-->
            <div class="jd_product_tit">
                <h3>京东超市</h3>
            </div>
            <!--详情-->
            <!--详情-->
            <div class="product_con clearfix">
                <a class="w_50 f_left b_right" href="#"><img src="images/cp1.jpg" alt=""/></a>
                <a class="w_50 f_right b_bottom" href="#"><img src="images/cp2.jpg" alt=""/></a>
                <a class="w_50 f_right" href="#"><img src="images/cp3.jpg" alt=""/></a>
            </div>
        </section>
    </main>
</div>
<!--<script src="js/common.js"></script>
<script src="js/index.js"></script>-->
<!--1.引入zepto.js-->
<script src="js/zepto/zepto.min.js"></script>
<!--zepto扩展性选择器需要引入selector选择器-->
<script src='js/zepto/selector.js'></script>
<script src='js/zepto/fx.js'></script>
<script src='js/zepto/touch.js'></script>
<!--2.zepto实现轮播图-->
<script>
    $(function () {
        /*2.1获取DOM*/
        var $banner = $('.jd_banner');
        var $imageBox = $banner.find('ul:first-child');
        /*ul:eq(1)是扩展性的选择器,我们需要引入zepto中的selector.js*/
        var $pointBox = $banner.find('ul:eq(1)');
        /*console.log($pointBox );*/
        var $points = $pointBox.find('li');
        var width = $banner.width();
        /*2.2自动轮播,初始界面index为1*/
        var index = 1;
        /*封装动画*/
        var animationFuc= function (callback) {
            /*2.3动画C3，animate有4个参数，最后一个是回调函数，无缝衔接可以在回调函数里面做*/
            $imageBox.animate({'transform':'translateX('+(-index*width)+'px)'},200,'ease', function () {
                /*2.4动画结束的回调函数*/
                /*2.4-1无缝衔接*/
                if(index>=9){
                    index=1;
                    /*2.4-2瞬间定位(只有index<=0或者index>=9的时候才需要瞬间定位)*/
                    $imageBox.css({'transform':'translateX('+(-index*width)+'px)'});
                }else if(index<=0){
                    index=8;
                    $imageBox.css({'transform':'translateX('+(-index*width)+'px)'});
                }
                /*2.5设置原点*/
                $points.removeClass('now').eq(index-1).addClass('now');
                callback && callback();
            });
        }
        /*3.正常情况*/
        var timer = setInterval(function () {
            index ++;
            /*实现动画,zepto实现动画都是用的css3,自动轮播的时候不清楚定时器，只有滑动的时候才需要清除定时器*/
            animationFuc();

        },4000);
        /*滑动切换，zepto提供的是手势，左右滑动的手势*/
        $imageBox.on('swipeLeft', function () {
            //下一张
            index++;
            clearInterval(timer);
            animationFuc(function () {
                clearInterval(timer);
                timer = setInterval(function () {
                    index ++;
                    /*实现动画,zepto实现动画都是用的css3,自动轮播的时候不清楚定时器，只有滑动的时候才需要清除定时器*/
                    animationFuc();
                },4000);
            });
        });
        $imageBox.on('swipeRight', function () {
            //上一张
            index--;
            clearInterval(timer);
            animationFuc(function () {
                clearInterval(timer);
                timer =setInterval(function () {
                    index ++;
                    /*实现动画,zepto实现动画都是用的css3,自动轮播的时候不清楚定时器，只有滑动的时候才需要清除定时器*/
                    animationFuc();

                },4000);
            });
        });
    })
</script>
</body>
</html>